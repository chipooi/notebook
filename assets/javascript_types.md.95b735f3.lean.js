import{o as n,c as s,b as a,d as t}from"./app.ddc29a11.js";const l='{"title":"原始类型","description":"","frontmatter":{},"headers":[{"level":2,"title":"原始类型","slug":"原始类型"},{"level":3,"title":"null","slug":"null"},{"level":3,"title":"number","slug":"number"},{"level":3,"title":"BigInt","slug":"bigint"}],"relativePath":"javascript/types.md","lastUpdated":1621867107396}',e={},o=a("h2",{id:"原始类型"},[a("a",{class:"header-anchor",href:"#原始类型","aria-hidden":"true"},"#"),t(" 原始类型")],-1),c=a("ul",null,[a("li",null,[a("p",null,"boolean")]),a("li",null,[a("p",null,"null")]),a("li",null,[a("p",null,"number")]),a("li",null,[a("p",null,"string")]),a("li",null,[a("p",null,"undefined")]),a("li",null,[a("p",null,"NaN")]),a("li",null,[a("p",null,"symbol")]),a("li",null,[a("p",null,"bigInt")])],-1),u=a("h3",{id:"null"},[a("a",{class:"header-anchor",href:"#null","aria-hidden":"true"},"#"),t(" null")],-1),p=a("p",null,[t("虽然"),a("code",null,"typeof null"),t("输出"),a("code",null,"object"),t("，但是这不代表 null 是 object，这是 JS 存在的一个悠久的 bug。在 JS 最初的版本中使用的是 32 位系统，为了性能考虑使用低位存储变量的类型信息，"),a("code",null,"000"),t("开头代表是对象，然后"),a("code",null,"null"),t("表示为全零，所以将它错误的判断为"),a("code",null,"object"),t("，所以将它错误的判断为"),a("code",null,"object"),t("。")],-1),i=a("h3",{id:"number"},[a("a",{class:"header-anchor",href:"#number","aria-hidden":"true"},"#"),t(" number")],-1),r=a("p",null,[a("code",null,"0.1 + 0.2 != 0.3，为什么？")],-1),k=a("p",null,"在 JS 中数字以 IEEE 754 双精度 64 位浮点数来存储。",-1),m=a("p",null,"在计算机中，数字都是以二进制存储的，所以我们要先将 0.1 和 0.2 转换成二进制。",-1),d=a("p",null,"十进制转二进制的时候，正数部分除 2 取余，倒序排列；小数部分乘 2 取整，顺序排列。",-1),b=a("p",null,"0.1 转换成二进制为：",-1),g=a("p",null,"0.0 0011 0011 0011 0011 0011 0011 0011 ... (0011 循环)",-1),h=a("p",null,"0.2 转换成二进制为：",-1),f=a("p",null,"0.0011 0011 0011 0011 0011 0011 0011 ... (0011 循环)",-1),I=a("p",null,"计算得到的结果转成十进制后是 0.30000000000000004，所以 0.1 + 0.2 != 0.3",-1),v=a("p",null,"解决办法：",-1),B=a("div",{class:"language-js"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// 可以通过js库解决"),t("\n"),a("span",{class:"token comment"},"// 最简单的是通过parseFloat和toFixed解决"),t("\n"),a("span",{class:"token function"},"parseFloat"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"0.1"),t(),a("span",{class:"token operator"},"+"),t(),a("span",{class:"token number"},"0.2"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toFixed"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"10"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token operator"},"==="),t(),a("span",{class:"token number"},"0.3"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// => tue"),t("\n")])])],-1),j=a("h3",{id:"bigint"},[a("a",{class:"header-anchor",href:"#bigint","aria-hidden":"true"},"#"),t(" BigInt")],-1),y=a("h4",{id:"什么是-bigint？"},[a("a",{class:"header-anchor",href:"#什么是-bigint？","aria-hidden":"true"},"#"),t(" 什么是 BigInt？")],-1),E=a("p",null,[t("BigInt 是一种新的 JS 数据类型，用于当整数值大于 Number 数据类型支持的范围"),a("code",null,"小于（-(2^53 - 1) "),t("和"),a("code",null,"大于((2*53)-1) ）"),t("时。这种数据类型允许我们安全地对"),a("code",null,"大整数"),t("执行书算术操作并且不需要通过其他的 JS 库。")],-1),N=a("p",null,"如：表示高分辨率的时间戳，使用大整数 id 等。",-1),x=a("h4",{id:"为什么需要-bigint？"},[a("a",{class:"header-anchor",href:"#为什么需要-bigint？","aria-hidden":"true"},"#"),t(" 为什么需要 BigInt？")],-1),J=a("p",null,"在 JS 中，所有的数字都已 IEEE 754 双精度 64 位浮点数表示，这导致了 JS 中的 Number 无法精确表示非常大的整数，它会将非常大的整数进行四舍五入，准确的说，JS 中的 Number 类型只能安全地表示-9007199254740991(-(2^53 - 1))和 9007199254740991（(2^53-1)）之间的值，任何超出此范围的整数值都可能失去精度",-1),S=a("div",{class:"language-js"},[a("pre",null,[a("code",null,[t("console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"9999999999999999"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// => 10000000000000000"),t("\n"),a("span",{class:"token number"},"9007199254740992"),t(),a("span",{class:"token operator"},"==="),t(),a("span",{class:"token number"},"9007199254740993"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// => true"),t("\n")])])],-1),w=a("h4",{id:"如何创建并使用-bigint"},[a("a",{class:"header-anchor",href:"#如何创建并使用-bigint","aria-hidden":"true"},"#"),t(" 如何创建并使用 BigInt")],-1),F=a("ul",null,[a("li",null,"在数字末尾追加 n 即可")],-1),T=a("div",{class:"language-js"},[a("pre",null,[a("code",null,[t("console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"9007199254740995n"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// => 9007199254740995n"),t("\nconsole"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"9007199254740995"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// => 9007199254740996"),t("\n")])])],-1),P=a("ul",null,[a("li",null,"使用 BigInt()构造函数")],-1),A=a("div",{class:"language-js"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"BigInt"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"9007199254740995"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// => 9007199254740995n"),t("\n")])])],-1),C=a("p",null,"使用方式如下：",-1),M=a("div",{class:"language-js"},[a("pre",null,[a("code",null,[a("span",{class:"token number"},"10n"),t(),a("span",{class:"token operator"},"+"),t(),a("span",{class:"token number"},"20n"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// => 30n"),t("\n"),a("span",{class:"token number"},"10n"),t(),a("span",{class:"token operator"},"-"),t(),a("span",{class:"token number"},"20n"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// => -10n"),t("\n"),a("span",{class:"token operator"},"+"),a("span",{class:"token number"},"10n"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// TypeError: Cannot convert a BigInt value to a number"),t("\n"),a("span",{class:"token operator"},"-"),a("span",{class:"token number"},"10n"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// => -10n"),t("\n"),a("span",{class:"token number"},"10n"),t(),a("span",{class:"token operator"},"*"),t(),a("span",{class:"token number"},"20n"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// =>200n"),t("\n"),a("span",{class:"token number"},"20n"),t(),a("span",{class:"token operator"},"/"),t(),a("span",{class:"token number"},"10n"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// => 2n"),t("\n"),a("span",{class:"token number"},"23n"),t(),a("span",{class:"token operator"},"%"),t(),a("span",{class:"token number"},"10n"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// => 3n"),t("\n"),a("span",{class:"token number"},"10n"),t(),a("span",{class:"token operator"},"**"),t(),a("span",{class:"token number"},"3n"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// => 1000n"),t("\n\n"),a("span",{class:"token keyword"},"const"),t(" x "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token number"},"10n"),a("span",{class:"token punctuation"},";"),t("\n"),a("span",{class:"token operator"},"--"),t("x"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// =>9n"),t("\n"),a("span",{class:"token operator"},"++"),t("x"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// =>10n"),t("\nconsole"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"typeof"),t(" x"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// 'bigint'"),t("\n")])])],-1),U=a("h4",{id:"需要注意的点"},[a("a",{class:"header-anchor",href:"#需要注意的点","aria-hidden":"true"},"#"),t(" 需要注意的点")],-1),W=a("ol",null,[a("li",null,"BigInt 不支持一元加号运算符进行转换，这可能使某些程序依赖于 + 始终生成 Number 的不变量或者抛出异常。另外，更改 + 的行为也会破坏 asm.js 代码。"),a("li",null,"因为隐式类型转换可能丢失信息，所以不允许在 bigint 和 Number 之间进行混合操作。当混合使用大整数和浮点数时，结果值可能无法由 BigInt 或 Number 精确表示。")],-1),q=a("div",{class:"language-js"},[a("pre",null,[a("code",null,[a("span",{class:"token number"},"10"),t(),a("span",{class:"token operator"},"+"),t(),a("span",{class:"token number"},"10n"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// => TypeError"),t("\n")])])],-1),z=a("ol",{start:"3"},[a("li",null,"不能将 BigInt 传递为 Web API 和内置的 JS 函数，这些函数需要一个 Number 类型的数值。尝试这样做会报 TypeError 错误。")],-1),D=a("div",{class:"language-js"},[a("pre",null,[a("code",null,[t("Math"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"max"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"2n"),a("span",{class:"token punctuation"},","),t(),a("span",{class:"token number"},"4n"),a("span",{class:"token punctuation"},","),t(),a("span",{class:"token number"},"6n"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t(),a("span",{class:"token comment"},"// => TypeError"),t("\n")])])],-1),G=a("ol",{start:"4"},[a("li",null,"当 Boolean 类型与 BigInt 类型进行比较时，BigInt 的处理方式与 Number 类型，除了 0n 以外的值都为 truth。")],-1),H=a("div",{class:"language-js"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"if"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"0n"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"0n"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n"),a("span",{class:"token punctuation"},"}"),t(),a("span",{class:"token keyword"},"else"),t(),a("span",{class:"token keyword"},"if"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"1n"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"1n"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n"),a("span",{class:"token punctuation"},"}"),t("\n"),a("span",{class:"token comment"},"// 1n"),t("\n")])])],-1),K=a("ol",{start:"5"},[a("li",null,[a("p",null,"元素都为 BigInt 的数组可以进行 sort 排序。")]),a("li",null,[a("p",null,"BigInt 可以正常地进行位运算，如|、&、<<、>>和^。")]),a("li",null,[a("p",null,"兼容性："),a("p",null,[a("img",{src:"/notebook/assets/image-20210514230613796.649c89ec.png",alt:"image-20210514230613796"})])])],-1);e.render=function(a,t,l,e,L,O){return n(),s("div",null,[o,c,u,p,i,r,k,m,d,b,g,h,f,I,v,B,j,y,E,N,x,J,S,w,F,T,P,A,C,M,U,W,q,z,D,G,H,K])};export default e;export{l as __pageData};
